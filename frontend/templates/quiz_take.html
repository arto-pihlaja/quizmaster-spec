{% extends "base.html" %}

{% block title %}{{ quiz.quiz_title }} - QuizMaster{% endblock %}

{% block content %}
<div class="quiz-taking">
    <div class="quiz-header">
        <h1>{{ quiz.quiz_title }}</h1>
        <p class="question-count">{{ quiz.total_questions }} question{% if quiz.total_questions != 1 %}s{% endif %}</p>
    </div>

    <form id="quiz-form" data-attempt-id="{{ quiz.attempt_id }}">
        <div id="questions-container">
            {% for question in quiz.questions %}
            <div class="question-block" data-question-id="{{ question.id }}">
                <div class="question-header">
                    <span class="question-number">Question {{ question.order }}</span>
                </div>
                <div class="question-text">
                    {{ question.text }}
                </div>
                <div class="answers-list">
                    {% for answer in question.answers %}
                    <label class="answer-option" data-answer-id="{{ answer.id }}">
                        <input type="radio"
                               name="question_{{ question.id }}"
                               value="{{ answer.id }}"
                               class="answer-radio">
                        <span class="answer-text">{{ answer.text }}</span>
                    </label>
                    {% endfor %}
                </div>
            </div>
            {% endfor %}
        </div>

        <div class="form-actions">
            <a href="/browse" class="btn btn-secondary">Cancel</a>
            <button type="submit" class="btn btn-primary" id="submit-btn">Submit Quiz</button>
        </div>

        <div id="form-error" class="form-error" style="display: none;"></div>
    </form>
</div>
{% endblock %}

{% block scripts %}
<script src="/static/js/attempt.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        initQuizTaking();
    });
</script>
{% endblock %}
