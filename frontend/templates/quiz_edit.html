{% extends "base.html" %}

{% block title %}Edit Quiz - QuizMaster{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Edit Quiz</h1>
</div>

<form id="quiz-form" class="quiz-form" data-quiz-id="{{ quiz.id }}">
    <div class="form-group">
        <label for="quiz-title">Quiz Title</label>
        <input type="text" id="quiz-title" name="title" required maxlength="200" value="{{ quiz.title }}">
        <span class="error-message" id="title-error"></span>
    </div>

    <div id="questions-container">
        <h2>Questions</h2>
        <div id="questions-list">
            <!-- Questions will be loaded dynamically -->
        </div>
        <button type="button" id="add-question-btn" class="btn btn-secondary">Add Question</button>
    </div>

    <div class="form-actions">
        <a href="/my-quizzes" class="btn btn-secondary">Cancel</a>
        <button type="submit" class="btn btn-primary">Save Changes</button>
    </div>

    <div id="form-error" class="form-error" style="display: none;"></div>
</form>
{% endblock %}

{% block scripts %}
<script src="/static/js/quiz.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        initQuizForm();
        // Load existing quiz data
        const quizData = {{ quiz | tojson }};
        loadQuizData(quizData);
    });
</script>
{% endblock %}
